{"version":3,"sources":["components/Spinner.js","utils/crawler.js","data/members.js","App.js","index.js"],"names":["useStyles","makeStyles","styledProgress","color","Spinner","styled","div","LoadingMask","isLoading","classes","style","display","Fade","in","transitionDelay","unmountOnExit","CircularProgress","root","getPostCount","res","text","cheerio","load","data","$","split","filter","i","length","Number","crawler","url","a","axios","get","count","members","AppContainer","TitleContainer","TeamName","Days","LinkToPage","TableWrapper","table","width","header","backgroundColor","headerCell","fontFamily","fontWeight","cell","drow","height","App","useState","setData","setIsLoading","useEffect","membersRefactored","reduce","dataRefactored","curr","name","concat","postCount","start","Date","now","diff","Math","floor","every","dataWithPostCounts","map","d","Promise","all","fetchData","then","sortedData","sort","b","localeCompare","sortData","unit","TableContainer","component","Paper","className","Table","size","aria-label","TableHead","TableRow","TableCell","align","TableBody","key","scope","href","target","rel","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.88e98052.chunk.js","sourcesContent":["import { CircularProgress } from '@material-ui/core'\nimport Fade from '@material-ui/core/Fade';\nimport React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport styled from 'styled-components'\n\nconst useStyles = makeStyles({\n  styledProgress: {\n    color: 'rgb(255, 102, 0)',\n  },\n})\nconst Spinner = styled.div`\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0%;\n  bottom: 0;\n  left: 0%;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.25);\n  z-index: 999;\n`\n\nconst LoadingMask = ({isLoading}) => {\n  const classes = useStyles()\n\n  return (\n    <Spinner style={{ display: isLoading ? \"flex\" : \"none\" }}>\n      <Fade\n          in={isLoading}\n          style={{\n            transitionDelay: isLoading ? '800ms' : '0ms',\n          }}\n          unmountOnExit\n        >\n          <CircularProgress classes={{ root: classes.styledProgress }} />\n        </Fade>\n    </Spinner >\n  )\n}\n\nexport default LoadingMask\n","import axios from 'axios'\nimport cheerio from 'cheerio'\n\nconst crawler = async (url) => {\n  const res = await axios.get(url)\n  const count = getPostCount(res)\n  return count\n}\n\nfunction getPostCount(res) {\n  const $ = cheerio.load(res.data)\n  let text = $('.subscription-group').text()\n  text = text.split(' ')\n  text = text.filter(i => i.length > 0 && i[0] !== '\\n')\n  return Number(text[5])\n}\n\nexport default crawler\n","const members = [\n  ['td', 'https://ithelp.ithome.com.tw/users/20116003/ironman/2935'],\n  ['Yenting', 'https://ithelp.ithome.com.tw/users/20120822/ironman/3061'],\n  ['Jayne', 'https://ithelp.ithome.com.tw/users/20128754/ironman/2954'],\n  ['SML', 'https://ithelp.ithome.com.tw/users/20129007/ironman/2962'],\n  ['Victor', 'https://ithelp.ithome.com.tw/users/20113462/ironman/2977'],\n  ['Wesley', 'https://ithelp.ithome.com.tw/users/20107303/ironman/2980'],\n  ['Kent', 'https://ithelp.ithome.com.tw/users/20129231/ironman/3028'],\n  ['Ellen', 'https://ithelp.ithome.com.tw/users/20129237/ironman/3030'],\n  ['Bernard', 'https://ithelp.ithome.com.tw/users/20129249/ironman/3034'],\n  ['Emily', 'https://ithelp.ithome.com.tw/users/20128928/ironman/3035'],\n  ['Grant', 'https://ithelp.ithome.com.tw/users/20128925/ironman/3037'],\n  ['Rafeni', 'https://ithelp.ithome.com.tw/users/20129163/ironman/3038'],\n  ['Walter', 'https://ithelp.ithome.com.tw/users/20128931/ironman/3039'],\n  ['Jasper', 'https://ithelp.ithome.com.tw/users/20128902/ironman/3045'],\n  ['gigd123', 'https://ithelp.ithome.com.tw/users/20129269/ironman/3050'],\n  ['Danny', 'https://ithelp.ithome.com.tw/users/20129072/ironman/3052'],\n  ['Water', 'https://ithelp.ithome.com.tw/users/20129286/ironman/3057'],\n  ['lagagain', 'https://ithelp.ithome.com.tw/users/20112470/ironman/3058'],\n  ['Sean', 'https://ithelp.ithome.com.tw/users/20129306/ironman/3071'],\n  ['Kaleb', 'https://ithelp.ithome.com.tw/users/20129427/ironman/3116'],\n  ['Zarek', 'https://ithelp.ithome.com.tw/users/20103425/ironman/3143'],\n  ['shizuku', 'https://ithelp.ithome.com.tw/users/20129636/ironman/3382'],\n  ['Sam', 'https://ithelp.ithome.com.tw/users/20130041/ironman/3413'],\n  ['Dez', 'https://ithelp.ithome.com.tw/users/20107572/ironman/3457'],\n]\n\nexport default members","import React, { useEffect, useState } from 'react'\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@material-ui/core'\n\nimport Moment from 'react-moment'\nimport Paper from '@material-ui/core/Paper'\nimport Spinner from './components/Spinner'\nimport crawler from './utils/crawler'\nimport { makeStyles } from '@material-ui/core/styles'\nimport members from './data/members'\nimport styled from 'styled-components'\n\nconst AppContainer = styled.div`\n    width: 100%;\n    display: flex;\n    position: relative;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n    background-color: #282c34;\n    color: #ffffff;\n`\nconst TitleContainer = styled.div`\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  height: 100px;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: #282c34;\n  padding: 20px;\n`\nconst TeamName = styled.div`\n  font-size: 30px;\n  font-weight: 700;\n`\nconst Days = styled.div`\n  padding: 10px;\n  font-size: 20px;\n  font-weight: 700;\n`\nconst LinkToPage = styled.div`\n  a {\n    color: #000000;\n    text-decoration: none;\n    :hover {\n      color: blue;\n    }\n  }\n`\nconst TableWrapper = styled.div`\n  width: 50%;\n  margin-top: 100px;\n  border: 1px solid #ffffff;\n  border-radius: 4px;\n  margin-bottom: 50px;\n`\n\nconst useStyles = makeStyles({\n  table: {\n    width: \"100%\",\n  },\n  header: {\n    backgroundColor: \"#333333\"\n  },\n  headerCell: {\n    color: \"#ffffff\",\n    fontFamily: \"Source Code Pro\",\n    fontWeight: \"700\",\n  },\n  cell: {\n    fontFamily: \"Source Code Pro\",\n    fontWeight: \"700\",\n  },\n  drow: {\n    backgroundColor: \"#ffcbcb\",\n  },\n  styledProgress: {\n    color: '#282c34',\n    height: '20px !important',\n    width: '20px !important',\n  },\n})\n\nconst refactorData = (members) => {\n  return members.reduce((dataRefactored, curr) => {\n    const [name, url] = curr;\n    return dataRefactored.concat({\n      name,\n      url,\n      postCount: null,\n    });\n  }, []);\n};\n\nconst fetchData = (data) => {\n  const dataWithPostCounts = data.map(async (d) => {\n    const { name, url } = d;\n    const postCount = await crawler(url);\n\n    return { name, url, postCount };\n  });\n\n  return Promise.all(dataWithPostCounts);\n};\n\nconst sortData = (data) => {\n  return data.sort((a ,b) => {\n    if (a.postCount === b.postCount) {\n      return a.name.localeCompare(b.name)\n    } else {\n     return a.postCount - b.postCount\n    }\n  })\n}\n\nconst App = () => {\n  const classes = useStyles();\n  const [data, setData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    const membersRefactored = refactorData(members);\n    setData(membersRefactored);\n  }, []);\n\n  // get days\n  let start = new Date('2020-09-13 00:00:00');\n  let now = new Date();\n  let diff = Math.floor((now - start) / 86400000);\n\n  useEffect(() => {\n    if (data.length === 0) {\n      return;\n    }\n\n    const gotAllPosts = data.every(({ postCount }) => postCount);\n    if (gotAllPosts) {\n      setIsLoading(false)\n      return;\n    }\n\n    fetchData(data).then((res) => {\n      const sortedData = sortData(res)\n      setData(sortedData);\n    });\n  }, [data]);\n\n  return (\n    <AppContainer>\n      <Spinner isLoading={isLoading} />\n      <TitleContainer>\n        <TeamName>#OutcomeFirst</TeamName>\n        <Days>\n          開賽第\n          <Moment diff=\"2020-09-13\" unit=\"days\">\n             {new Date()}\n          </Moment>\n          天\n        </Days>\n      </TitleContainer>\n      { data.length > 0 && (\n        <TableWrapper>\n          <TableContainer component={Paper} className={classes.table}>\n            <Table size=\"small\" aria-label=\"a dense table\">\n              <TableHead className={classes.header}>\n                <TableRow>\n                  <TableCell className={classes.headerCell}>Name</TableCell>\n                  <TableCell align=\"right\" className={classes.headerCell}>Posts</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {data.map(({ name, url, postCount }) => (\n                  <TableRow key={name} className={(diff === Number(postCount)) ? null : ( postCount ? classes.drow : null)}>\n                    <TableCell component=\"th\" scope=\"row\" className={classes.cell}>\n                      <LinkToPage><a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{name}</a></LinkToPage>\n                    </TableCell>\n                    <TableCell align=\"right\" className={classes.cell}>\n                      {postCount}\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </TableWrapper>\n      )}\n    </AppContainer>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}